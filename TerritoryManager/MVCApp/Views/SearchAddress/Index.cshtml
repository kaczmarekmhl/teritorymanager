@model IPagedList<MVCApp.Models.Person>

@{
    ViewBag.Title = "Index";
    int districtId = ViewBag.DistrictId;
    string districtName = ViewBag.DistrictName;
}

<h2>Search addresses for @Html.DisplayFor(model => districtName)</h2>

<div>
    <div>
        @using (Ajax.BeginForm(
            "GetPersonList", 
            new { id = districtId },
            new AjaxOptions
            {
                HttpMethod = "get",
                InsertionMode = InsertionMode.Replace,
                UpdateTargetId = "personList",
                Url = Url.Action("GetPersonList", "SearchAddress", new { id = districtId }),
                LoadingElementId = "ajax-loader"
            }))
        {
            <input type="submit" value="Search addresses" />
        }
    </div>
    <div>District Map
        <img src="~/Images/Map.png" alt="District map" style="float:right"/>
    </div>
</div>

<div id="ajax-loader" style="display: none;">
    <img src="~/Images/ajax-loader.gif">
    <p>This can take couple of minutes...</p>
</div>
<div id="personList">
    @Html.Partial("_PersonList")
</div>
